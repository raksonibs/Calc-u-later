---
layout: default
title: Blog Posts
---

<div id="marketing" class="marketing">  
  <div id="start">
    <image id="calc-img" src="http://icons.iconarchive.com/icons/grafikartes/flat-retro-modern/512/calculator-icon.png" /> 
    <div class="post-cont">
      <h1>Welcome to Calc-u-Later!</h1>
      <h3>30 Mar 2016</h3>
      <ul>
        <li><a href="/">Home</a></li> 
        <li><a href="https://s3-us-west-2.amazonaws.com/bookpdftest/Final+Requirement+document_draft.pdf" target="_blank">Requirements (Asma)</a></li>
        <li><a href="https://s3-us-west-2.amazonaws.com/bookpdftest/Design+Document.pdf" target="_blank">Designs (Asma)</a></li>
        <li><a href="https://s3-us-west-2.amazonaws.com/bookpdftest/TestCase.pdf" target="_blank">Tests (Brad)</a></li>
        <li><a href="https://s3-us-west-2.amazonaws.com/bookpdftest/User+Manual+.pdf" target="_blank">User Manual (Mohammad)</a></li>
        <li><a href="https://github.com/raksonibs/Calc-u-later" target="_blank">Github Repo</a></li>
        <li><a href="https://s3-us-west-2.amazonaws.com/bookpdftest/Calc-u-Later+(1).jar" target="_blank">Download the Calculator!</a></li>
        <li><h3>Double click <b>this</b> to go through the presentation!</h3></li>
      </ul>
    </div>
  </div>

  <div class="presentation">
    <div id="intro" class="slide">
      <h1>Hi There.</h1>
      <div class="left-bracket">
      &#60;
      </div>
      <div class="images">
        <image class="inline-img" src="https://s3-us-west-2.amazonaws.com/bookpdftest/mohammad.jpg" />
        <image class="inline-img" src="https://s3-us-west-2.amazonaws.com/bookpdftest/oskar.JPG" />
        <image class="inline-img" src="https://s3-us-west-2.amazonaws.com/bookpdftest/anji.png" />
        <image class="inline-img" src="https://s3-us-west-2.amazonaws.com/bookpdftest/brad.png" />
        <image class="inline-img" src="https://s3-us-west-2.amazonaws.com/bookpdftest/asmah.png" />
      </div>
      <div class="right-bracket">
      /&#62;
      </div>
    </div>
    <div id="idea" class="slide">
      <svg width="500" height="75"></svg>
      <image id="babbage" src="https://s3-us-west-2.amazonaws.com/bookpdftest/babbage.jpg"/>
    </div>
    <div id="demo" class="slide">
      <h1>Demo</h1>
      <ul>
        <li>
          <i class="fa fa-calculator"></i>
          <br />
          Basic
        </li>
        <li>
          <i class="fa fa-mortar-board"></i>
          <br />
          Advanced
        </li>
        <li>
          <i class="fa fa-bug"></i>
          <br />
          Error Handling
        </li>
        <li>
          <i class="fa fa-bar-chart"></i>
          <br />
          Graph
        </li>
        <li>
          <i class="fa fa-star"></i>
          <br />
          Favourites
        </li>
      </ul>
    </div>
    <div id="design" class="slide">
      <h1>Design</h1>
      <ul>
        <h2><em>Parts of our design document </em></h2>
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design1.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design2.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design3.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design4.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design5.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design6.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design7.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design8.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/design9.png" />
        <br />
        <br />
        <br />
        <h3>MVC Overview</h3>
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/classdiagram.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/classmain.png" />
        <h3>UML Diagrams</h3>
        <div class="uml-holder">
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/modeluml.png" />
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/controlleruml.png" />
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/viewuml.png" />
          <br/>
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/graphmodel.png" />
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/graphcontroller.png" />
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/graphview.png" />
          <br />
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/favcontroller.png" />
          <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/favview.png" />
        </div>
        <br />
        <h3>Expression Builder/Parser</h3>
        <pre class="prettyprint">
public Boolean isOperator(String value){

//Check to see if a string is an operator

//Note that Ã— is for multiply, not x as in the letter!
if(value.equals("+") || value.equals("-")  || value.equals("*")|| value.equals("/")|| value.equals("=")){ 

  return true;
}
else
{
  return false;
}

}
//...

/**
 * Convert postFix stack to inFix
 * @return Converted String
 */
public String getExpressionValue(){

  String expression = "";
  
  //Create a clone of the expression list so we can pop things without disturbing the list
  /* 
   * This is how this works....
   * 
   * We get the expressionList stack which could look like this:
   * (Read the stacks right>left = top>bottom)
   * 1,2,3,+,+
   * We reverse it
   * +,+,3,2,1 
   * 
   * We keep popping from this stack and putting the numbers into the container stack
   * until we reach an operator like +,-,x,/
   * Then we take the top two numbers from the container and put the operator 
   * in between the two numbers and put it back into the container stack.
   * We do this until we reach the end of the stack, then we reverse the
   * container stack and print it out to a String.
   */
  Stack cloneExpressionList = new Stack();
  Stack reverse = new Stack();
  Stack container = new Stack();

  cloneExpressionList = (Stack) expressionList.clone();
  
  while(cloneExpressionList.size() > 0){
    reverse.push(cloneExpressionList.pop());
  }
  
  while(reverse.size()>0){
    
    String value = reverse.pop().toString();
    
    //Check is +,-,/,x
    if(isOperator(value)){
      
      String number2 = container.pop().toString();
      String number1 = container.pop().toString();
      
      container.push("(" + number1 + value + number2 + ")");
      
    }
    //Check if sin or cos
    else if(isTrignometric(value))
    {
      String number1 = container.pop().toString();
      
      container.push(value + "(" + number1 + ")");
    }
    else if (isFactorial(value))
    {
      String number1 = container.pop().toString();
      container.push(number1 + value);
    }
    else if(isVariable(value))
    {
      //String number1 = container.pop().toString();
      
      container.push( value );
    }
    else
    {
      container.push(value);
    }

  }
  
  //System.out.println("Container stack: ");
  //printStackToConsole(container);
  
  //Reverse the container stack
  while(container.size() > 0){
    reverse.push(container.pop());
  }

  //System.out.println("Container stack: ");
  //printStackToConsole(reverse);
  
  //Add everything in the container to a String separated by commas
  while(reverse.size()>0){
    expression = expression + "," + reverse.pop();
  }
  
  //Shave off the excess comma at the begining
  if(expression.length() > 0)
  {
  expression = expression.substring(1, expression.length());
  }
  
  //if (expression.contains("!") || expression.contains("sin") || expression.contains("cos") || expression.contains("X") || expression.contains(".") || expression.contains("+/-"))
  if(expression.contains(",")){
    System.out.println("this is expression"+expression);
    List&#60;String&#62; exps = Arrays.asList(expression.split(","));
    String result = "";
    for (int i = 0; i &#60; exps.size() ; i++){
      System.out.println("array"+exps.get(i));
      if(exps.get(i).contains("!") || exps.get(i).contains("sin") || exps.get(i).contains("cos") || exps.get(i).contains("X") || exps.contains("."))
      {
        result += exps.get(i);
        result += ",";
      }
      else
      {
      result += new Parser(exps.get(i)).parse();
      result += ",";
      }
    }
    return result;
  }
  else if(expression.contains("X") || expression.contains("sin") || expression.contains("cos") || expression.contains("!") || expression.contains("."))
    return expression;
  
  else
  {
  Parser exp = new Parser(expression);
  System.out.println("this is expression"+ expression);
  return exp.parse();

  }
  //System.out.println("this is expression"+ expression);
  //return expression;
}
        </pre>
        <h3>MAIN Layer</h3>
        <pre class="prettyprint">
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

import java.awt.*;

public class mainClass extends JApplet
{
 private JTabbedPane MAIN = new JTabbedPane();
 public static int WIDTH = 410;
 public static int HEIGHT = 485;

 CalcModel model;
 CalcController control = new CalcController(MAIN);
 FavouritesController favC;
 GraphController graphControl = new GraphController(MAIN);
 FavouritesPanel panel2;

public void init()
{
  System.out.println("mainClass");
  
   CalcModel model = new CalcModel(MAIN);
   final GraphModel graphModel = new GraphModel("");
   
   final CalcController calcControl = new CalcController(model, graphModel, MAIN);
   final GraphController graphControl = new GraphController(model, graphModel);
  
    panel2 = new FavouritesPanel(MAIN, control);
    CalcView calculatorView = new CalcView(calcControl, MAIN);
    final GraphView graphView = new GraphView(graphControl);

    MAIN.addTab("Calculator", calculatorView);
    MAIN.addTab("Graph", graphView);

    MAIN.addTab("Favourites", panel2);
    
    MAIN.addChangeListener(new ChangeListener() {
        public void stateChanged(ChangeEvent e) {
          graphControl.updateGraph();
            System.out.println("Tab: " + MAIN.getSelectedIndex());
            if (MAIN.getSelectedIndex() == 2)
            {
              for (String s: favC.a){panel2.addToFavourites(s);}
            }
            else if (MAIN.getSelectedIndex() == 0)
            {
              panel2.clearList();
                panel2.addToFavourites("Select Favourite...");
            } else if ( MAIN.getSelectedIndex() == 1) {
                if (panel2.fromFavourites)
                {
                  graphModel.pushExpression(panel2.selected);
                  panel2.fromFavourites = false;
                }
              graphView.updateGraph(graphModel.getChartPanel());
              panel2.clearList();
                panel2.addToFavourites("Select Favourite...");
            }            
        }
    });
  
    getContentPane().add(MAIN);
    setSize(WIDTH,HEIGHT);
}
}

//
public CalcController(JTabbedPane MAIN)
  {
    view = new CalcView(this, MAIN);
    view.setVisible(true);
  }

  //
  MAIN.setSelectedIndex(1);
        </pre>
        <h3>Graphing/Saving</h3>
        <pre class="prettyprint">
// GraphModel.java
String expressionString = expression;
       
if(expression.contains("!") && expression.contains("X")){   //Replace variable in factorial with appropriate numbers
  expressionString = expression.replace("!", fact(i));
}

e = new ExpressionBuilder(expressionString)
.variables("X", "y")
.build()
.setVariable("X", i);
double result = e.evaluate();

  if(expression.contains("X"))  //If we're dealing with a variable we have to account for asymptotes
  {
    /*
     * We check if the differences between two values starts to get too large
     * If its getting really big really quickly, its likely approaching an asymptote
     * This can cause issues with things like factorial, in which case the
     * tolerance needs to be adjusted to compensate.
     */
   current = result;
    difference = Math.abs(current - previous);  //Check the absolute value of the difference between current result and previous result

          
    //System.out.println(difference);
    
    if(difference &#60; prevDif * tolerance){
      //System.out.println("Within Bounds");
        series.add(i, result);
    }
    else
    {
      //System.out.println("Out of specified bounds");  //If out of bounds, don't connect the points

      series.add(i,null);
    }
  }
  else  //Other if theres no variables, were just drawing a straight line
  {
    series.add(i,result);
  }
  
  prevDif = difference;
  previous = current;   
  
}

XYSeriesCollection data = new XYSeriesCollection(series);
JFreeChart chart = ChartFactory.createXYLineChart(
 expressionDirty,
 "X", //X-axis Name
 "Y", //Y-axis Name
 data,  //Dataset
 PlotOrientation.VERTICAL,  //This will always be vertical for our purposes
 true,  //Legend
 true,  //Tool tips
 false  //URLS, (don't need this)
 );

ChartPanel chartPanel = new ChartPanel(chart);
chartPanel.setPreferredSize(new java.awt.Dimension(400, 400));    

return chartPanel;

}
        </pre>
      </ul>
    </div>
    <div id="testing" class="slide">
      <h1>Testing</h1>
      <ul class="image-holder">
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/t1.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/t2.png" />
        <br />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/t3.png" />
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/t4.png" />
      </ul>
    </div>
    <div id="web" class="slide">
      <canvas></canvas>
      <div class="web-holder">
        <h1>Web</h1>
        <ul>
          <li>Bar</li>
          <li>Come Visit!</li>
        </ul>
      </div>
    </div>
    <div id="asmah" class="slide">
      <h1>Asmah</h1>
      <ul>
        <h3>Requirements</h3>
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/classmain.png" />
      </ul>
    </div>
    <div id="mohammad" class="slide">
      <h1>Mohammad</h1>
      <ul>
        <h3>Expressions</h3>
        <pre class="prettyprint">
public class Parser {
 private final static char EOF = ';';
 private String input;
 private int currPos;
 public Parser(String input) {
 this.input = input + EOF; // mark the end
 this.currPos = -1;
}
public String parse() throws IllegalArgumentException {
 nextToken();
 Result result = expression();
 if(currToken() != EOF) {
   throw new IllegalArgumentException("Found unexpected character '"
    + currToken() + "' at position " + currPos);
 }
 return result.getText();
}
 // "expression()" handles "term" or "term + term" or "term - term"
private Result expression() throws IllegalArgumentException {
 Result leftArg = term();
 char operator = currToken();
 if (operator != '+' && operator != '-') {
 return leftArg; // EXIT
}
nextToken();
Result rightArg = term();
if(operator == '-' && (rightArg.getOp() == '-' || rightArg.getOp() ==
  '+')) {
 rightArg = encloseInParentheses(rightArg);
}
return new Result(leftArg.getText() + "" + operator + "" +
  rightArg.getText(), operator);
}
 // "term()" handles "factor" or "factor * factor" or "factor / factor"
private Result term() throws IllegalArgumentException {
 Result leftArg = factor();

 char operator = currToken();
 if (operator != '*' && operator != '/') {
 return leftArg; // EXIT
}
nextToken();
Result rightArg = factor();
if(leftArg.getOp() == '+' || leftArg.getOp() == '-') {
 leftArg = encloseInParentheses(leftArg);
}
if(rightArg.getOp() == '+' || rightArg.getOp() == '-' || (operator ==
  '/' && (rightArg.getOp() == '/' || rightArg.getOp() == '*'))) {
 rightArg = encloseInParentheses(rightArg);
}
return new Result(leftArg.getText() + "" + operator + "" +
  rightArg.getText(), operator);
}
 // "factor()" handles a "paren" or a "variable"
private Result factor() throws IllegalArgumentException {
 Result result;
 if(currToken() == '(') {
   result = paren();
 } else if(Character.isDigit(currToken())) {
   result = variable();
 } else {
   throw new IllegalArgumentException("Expected variable or '(',
    found '" + currToken() + "' at position " + currPos);
 }
 return result;
}
 // "paren()" handles an "expression" enclosed in parentheses
 // Called with currToken an opening parenthesis
private Result paren() throws IllegalArgumentException {
 nextToken();
 Result result = expression();
 if(currToken() != ')') {
   throw new IllegalArgumentException("Expected ')', found '" +
   currToken() + "' at position " + currPos);
 }
 nextToken();
 return result;
}
 // "variable()" handles a variable
  // Called with currToken a variable
private Result variable() throws IllegalArgumentException {
 Result result = new Result(Character.toString(currToken()), ' ');
 nextToken();
 return result;
}
private char currToken() {
 return input.charAt(currPos);
}
private void nextToken() {
 if(currPos >= input.length() - 1) {
   throw new IllegalArgumentException("Unexpected end of input");
 }
 do {
   ++currPos;
 }
 while(currToken() != EOF && currToken() == ' ');
}
private Result encloseInParentheses(Result result) {
 return new Result("(" + result.getText() + ")", result.getOp());
}
private class Result {
 private final String text;
 private final char op;
 private Result(String text, char op) {
   this.text = text;
   this.op = op;
 }
 public String getText() {
   return text;
 }
 public char getOp() {
   return op;
 }
}
}

// Numbers being stored
Stack cloneExpressionList = new Stack();
Stack reverse = new Stack();
Stack container = new Stack(); 
        </pre>
      </ul>
    </div>
    <div id="anji" class="slide">
      <h1>Anji</h1>
      <ul>
        <h3>Favourites</h3>
        <pre class="prettyprint">
box = new JComboBox<String>(); 
box.addItem("Select Favourite..."); 
box.addItemListener(new ItemListener() {
  public void itemStateChanged(ItemEvent e) {
    if (e.getStateChange() == ItemEvent.SELECTED &&!box.getSelectedItem().equals("Select Favourite...") && !flag)
    {
      selected = box.getSelectedItem().toString(); 
      fromFavourites = true; 
      MAIN.setSelectedIndex(1);
    } 
  }
});

//from settings in main
if (panel2.fromFavourites) {
  graphModel.pushExpression(panel2.selected);
  panel2.fromFavourites = false; 
}

//any save
public void saving(String s) {
  if (!a.contains(s)) 
    a.add(s);
}

//delete
JButton b = new ButtonAdapter("DELETE") {
  public void pressed() {
    flag = true; 
  }
};
b.setToolTipText("HOW TO DELETE: Press DELETE then select the expression you wish to delete.");

//when flag is true
if (e.getStateChange() == ItemEvent.SELECTED && !box.getSelectedItem().equals("Select Favourite...") && flag)
{
  favC.a.remove(box.getSelectedItem()); 
  box.removeItem(box.getSelectedItem()); 
  flag = false;
}

        </pre>
      </ul>
    </div>
    <div id="brad" class="slide">
      <h1>Brad</h1>
      <ul>
        <pre class="prettyprint">
  private JTabbedPane MAIN = new JTabbedPane();
  private CalcModel c;
  private BigInteger b;

  @Before
  public void setUp() throws Exception {
    c = new CalcModel(MAIN);
  }

  @Test
  public void testDivide() {
    c.divide(); //Check division with no input
    assertEquals("", c.getExpressionValue());
    double FirstInput = 8.0;
    c.pushNumber(BigDecimal.valueOf(FirstInput));
    double SecondInput = 4.0;
    c.pushNumber(BigDecimal.valueOf(SecondInput));
    c.divide();
    BigDecimal ExpectedValue = new BigDecimal(2.0);
    assertEquals(ExpectedValue, c.getCalculatedValue());
    //Check BigDecimal
    assertEquals(2.0, c.getCalculatedValue().doubleValue(), 0.01);
    //Check conversion to double
    assertEquals("/", c.getLastExpression());
    //Check that operator was placed correctly
    c.divide(); //Test that operator is substituted
    assertEquals("8/4/1", c.getExpressionValue());
    //Now test variables
    c.variable();
    c.divide();
    assertEquals("(((8/4)/1)/X)", c.getExpressionValue());
    //Ensure it still functions after clearing
    c.clear();
    FirstInput = 3.0;
    c.pushNumber(BigDecimal.valueOf(FirstInput));
    SecondInput = 0.0; //Checking divide by zero
    c.pushNumber(BigDecimal.valueOf(FirstInput));
    c.divide();
    assertEquals("3,0", c.getExpressionValue());
    //Ensure division didn't take place
  }
        </pre>
        <li>Graph</li>
        <pre class="prettyprint">
  public ChartPanel getChartPanel(){

    XYSeries series = new XYSeries(expression);
    //Enters the values

   for(double i = xLeft; i &#60; xRight; i = i + precision){
     String expressionString = expression;
     if(expression.contains("!") && expression.contains("X")){
    //Replace variable in factorial with appropriate numbers
     expressionString = expression.replace("!", fact(i));
   }

   e = new ExpressionBuilder(expressionString)
   .variables("X")
   .build()
   .setVariable("X", i);
   double result = e.evaluate();
   if(expression.contains("X")) {
    //If we're dealing with a variable we have to account for asymptotes

    /*
    We check if the differences between two values starts to get too large If its getting
    really big really quickly, its likely approaching an asymptote This can cause issues
    with things like factorial, in which case the tolerance needs to be adjusted to
    compensate.
    */
     current = result;
     difference = Math.abs(current - previous);
    //Check the absolute value of the difference between current result and previous
    result
    if(difference &#60; prevDif * tolerance){
      series.add(i, result);
    }
    else
    {
      series.add(i,null);
    }
    } else //Other if theres no variables, were just drawing a straight line
    {
      series.add(i,result);
    }

    prevDif = difference;
    previous = current;

    }

   XYSeriesCollection data = new XYSeriesCollection(series);
   JFreeChart chart = ChartFactory.createXYLineChart(
   expression,
   "X", //X-axis Name
   "Y", //Y-axis Name
   data, //Dataset
   PlotOrientation.VERTICAL,
   true, //Legend
   true, //Tool tips
   false
   );
   ChartPanel chartPanel = new ChartPanel(chart);
   chartPanel.setPreferredSize(new java.awt.Dimension(400, 400));
   return chartPanel;
  }
        </pre>
      </ul>
    </div>
    <div id="oskar" class="slide">
      <h1>Oskar</h1>
      <ul>
        <h3>Project Management</h3>
        <image src="https://s3-us-west-2.amazonaws.com/bookpdftest/commit.png" />
      </ul>
    </div>
    <div id="goals" class="slide">
      <h1>Stretch Goals</h1>
      <ul>
        <li>
          <i class="fa  fa-space-shuttle"></i>
          <br />
          Better Look
        </li>
        <li class="tomcat">
          <i class="fa fa-rocket"></i>
          <br />
          Servlet with Persistant DB - Tomcat
        </li>
      </ul>
    </div>

  </div>
  <div id="background-wrap">
    <div class="x1 backwards">
      <div class="cloud"></div>
    </div>

    <div class="x2">
      <div class="cloud"></div>
    </div>

    <div class="x3 backwards">
      <div class="cloud"></div>
    </div>

    <div class="x4">
      <div class="cloud"></div>
    </div>

    <div class="x5">
      <div class="cloud"></div>
    </div>

    <div class="x3">
      <div class="cloud"></div>
    </div>

    <div class="x4 backwards">
      <div class="cloud"></div>
    </div>
  </div>
</div>